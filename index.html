<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EAD - Comunicação Escrita - Normas Legais | ESP Floripa</title>
    
    <!-- React & ReactDOM (Via CDN) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel para processar o código React no navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS (Estilos) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonte Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        
        /* Cabeçalho Gradiente */
        .gradient-header { background: linear-gradient(135deg, #0f766e 0%, #0d9488 100%); }
        
        /* Banner Principal */
        .main-banner {
            background-image: linear-gradient(to right, rgba(255, 255, 255, 0.95) 40%, rgba(255, 255, 255, 0.6) 100%), url('https://i.imgur.com/ifF9JoA.png');
            background-size: cover;
            background-position: center;
            border-bottom: 4px solid #0f766e;
        }

        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Flip Card Styles */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .flip-card-inner { transition: transform 0.6s; }
        .flip-card:hover .flip-card-inner { transform: rotateY(180deg); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Ícones SVG ---
        const Icons = {
            BookOpen: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
            Play: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>,
            Mail: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>,
            MessageCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"></path></svg>,
            Share2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line></svg>,
            FileText: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" x2="8" y1="13" y2="13"></line><line x1="16" x2="8" y1="17" y2="17"></line><line x1="10" x2="8" y1="9" y2="9"></line></svg>,
            PenTool: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19 7-7 3 3-7 7-3-3z"></path><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="m2 2 7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>,
            CheckCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>,
            Circle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle></svg>,
            Menu: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>,
            X: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>,
            Clock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>,
            User: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>,
            Layout: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><line x1="3" x2="21" y1="9" y2="9"></line><line x1="9" x2="9" y1="21" y2="9"></line></svg>,
            ExternalLink: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg>,
            Info: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>,
            Shield: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>,
            Camera: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>,
            BarChart: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>,
            Users: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>,
            AlertTriangle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>,
            Settings: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            AlignLeft: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line></svg>,
            List: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>,
            Star: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>,
            Briefcase: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>,
            ClipboardCheck: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>,
            Grid: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>,
            GraduationCap: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
        };

        const SectionHeader = ({ iconName, title, duration, isCompleted, onToggle }) => {
            const Icon = Icons[iconName];
            return (
                <div className="flex flex-col md:flex-row md:items-center justify-between mb-6 border-b pb-4 border-gray-200">
                    <div className="flex items-center gap-3">
                        <div className="p-2 bg-teal-100 text-teal-700 rounded-lg">
                            {Icon ? <Icon size={24} /> : null}
                        </div>
                        <div>
                            <h2 className="text-xl font-bold text-gray-800">{title}</h2>
                            <div className="flex items-center text-sm text-gray-500 gap-2">
                                <Icons.Clock size={14} />
                                <span>{duration}</span>
                            </div>
                        </div>
                    </div>
                    <button 
                        onClick={onToggle}
                        className={`mt-4 md:mt-0 flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300 ${
                            isCompleted 
                            ? 'bg-green-100 text-green-700 border border-green-200 hover:bg-green-200' 
                            : 'bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200'
                        }`}
                    >
                        {isCompleted ? <Icons.CheckCircle size={18} /> : <Icons.Circle size={18} />}
                        {isCompleted ? 'Concluído' : 'Marcar como concluído'}
                    </button>
                </div>
            );
        };

        const PortariaStructure = () => (
            <div className="space-y-4 my-6">
                <div className="flex gap-4 p-4 bg-white rounded-lg border-l-4 border-blue-500 shadow-sm hover:shadow-md transition-shadow">
                    <div className="font-bold text-blue-500 w-24 shrink-0">1. Cabeçalho</div>
                    <div className="text-gray-600 text-sm">Identificação do órgão (Ministério, Secretaria), numeração, data e localidade.</div>
                </div>
                <div className="flex gap-4 p-4 bg-white rounded-lg border-l-4 border-indigo-500 shadow-sm hover:shadow-md transition-shadow">
                    <div className="font-bold text-indigo-500 w-24 shrink-0">2. Ementa</div>
                    <div className="text-gray-600 text-sm">Resumo breve e objetivo do propósito da portaria (Ex: "Dispõe sobre...").</div>
                </div>
                <div className="flex gap-4 p-4 bg-white rounded-lg border-l-4 border-purple-500 shadow-sm hover:shadow-md transition-shadow">
                    <div className="font-bold text-purple-500 w-24 shrink-0">3. Preâmbulo</div>
                    <div className="text-gray-600 text-sm">Fundamentação legal ("No uso das atribuições...") e Justificativa ("Considerando...").</div>
                </div>
                <div className="flex gap-4 p-4 bg-white rounded-lg border-l-4 border-teal-500 shadow-sm hover:shadow-md transition-shadow">
                    <div className="font-bold text-teal-500 w-24 shrink-0">4. Corpo</div>
                    <div className="text-gray-600 text-sm">Artigos (temas principais), Parágrafos (detalhes), Incisos e Alíneas (listas).</div>
                </div>
                <div className="flex gap-4 p-4 bg-white rounded-lg border-l-4 border-green-500 shadow-sm hover:shadow-md transition-shadow">
                    <div className="font-bold text-green-500 w-24 shrink-0">5. Final</div>
                    <div className="text-gray-600 text-sm">Vigência, Revogação e Assinatura da autoridade competente.</div>
                </div>
            </div>
        );

        // Componente Interativo para o Exercício
        const ScenarioViewer = () => {
            const [activeScenarioTab, setActiveScenarioTab] = useState(0);

            const tabs = [
                { id: 0, label: "Contexto", icon: "User" },
                { id: 1, label: "Determinações", icon: "List" },
                { id: 2, label: "Justificativa", icon: "AlignLeft" },
                { id: 3, label: "Dados Finais", icon: "Info" },
            ];

            return (
                <div className="bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 h-full flex flex-col">
                    <div className="bg-orange-500 p-4 text-white">
                        <h3 className="text-lg font-bold flex items-center gap-2">
                            <Icons.User size={24} className="text-white opacity-90"/> Cenário: Pindaíba do Norte
                        </h3>
                        <p className="text-sm opacity-90 mt-1">Estudo de caso para elaboração de ato administrativo.</p>
                    </div>
                    
                    {/* Tabs Header */}
                    <div className="flex border-b bg-gray-50 overflow-x-auto">
                        {tabs.map((tab) => (
                            <button
                                key={tab.id}
                                onClick={() => setActiveScenarioTab(tab.id)}
                                className={`flex-1 py-3 px-4 text-sm font-medium flex items-center justify-center gap-2 transition-colors whitespace-nowrap
                                    ${activeScenarioTab === tab.id 
                                        ? 'bg-white text-orange-600 border-b-2 border-orange-500' 
                                        : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`}
                            >
                                {Icons[tab.icon] && React.createElement(Icons[tab.icon], { size: 16 })}
                                {tab.label}
                            </button>
                        ))}
                    </div>

                    {/* Content */}
                    <div className="p-6 flex-1 overflow-y-auto">
                        {activeScenarioTab === 0 && (
                            <div className="animate-fade-in space-y-4">
                                <h4 className="font-bold text-gray-800 text-lg border-b pb-2">Seu Papel</h4>
                                <p className="text-gray-700 leading-relaxed">
                                    Você é <strong>Secretário Municipal de Saúde</strong> do município de <strong>Pindaíba do Norte</strong>.
                                </p>
                                <div className="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-400">
                                    <p className="text-sm text-gray-800">
                                        <strong>Base Legal:</strong> Foi nomeado com base no <strong>Artigo IV da Lei Municipal 137 de 12 de novembro de 1988</strong>.
                                    </p>
                                </div>
                                <p className="text-gray-700">
                                    <strong>Sua Missão:</strong> Publicar no Diário Oficial do Município a regulamentação de uma política municipal que define o funcionamento das Unidades Básicas de Saúde (UBS) do município.
                                </p>
                            </div>
                        )}

                        {activeScenarioTab === 1 && (
                            <div className="animate-fade-in space-y-4">
                                <h4 className="font-bold text-gray-800 text-lg border-b pb-2">Regras a Definir no ato administrativo</h4>
                                <ul className="space-y-3">
                                    <li className="bg-gray-50 p-3 rounded-lg border border-gray-200">
                                        <div className="font-bold text-orange-700 mb-1 flex items-center gap-2"><Icons.Clock size={14}/> Horário Geral</div>
                                        <p className="text-sm text-gray-600">
                                            <strong>2+ Equipes de Saúde:</strong> 08h às 17h (sem fechar para o almoço).<br/>
                                            <strong>1 Equipe:</strong> 08h às 17h (fechando entre 12h e 13h).
                                        </p>
                                    </li>
                                    <li className="bg-gray-50 p-3 rounded-lg border border-gray-200">
                                        <div className="font-bold text-orange-700 mb-1 flex items-center gap-2"><Icons.Star size={14}/> Horário Estendido (até 21h)</div>
                                        <p className="text-sm text-gray-600">
                                            Apenas para unidades com <strong>mais de 4 ESF</strong> listadas:<br/>
                                            • UBS Central<br/>
                                            • UBS Jardim Florido<br/>
                                            • UBS Buraco Fundo
                                        </p>
                                    </li>
                                    <li className="bg-gray-50 p-3 rounded-lg border border-gray-200">
                                        <div className="font-bold text-orange-700 mb-1 flex items-center gap-2"><Icons.Users size={14}/> Equipe Mínima</div>
                                        <p className="text-sm text-gray-600">
                                            Enquanto abertas, UBS devem ter no mínimo <strong>1 médico e 1 enfermeira</strong>. Gestão local organiza a escala para garantir cobertura total.
                                        </p>
                                    </li>
                                    <li className="bg-gray-50 p-3 rounded-lg border border-gray-200">
                                        <div className="font-bold text-orange-700 mb-1 flex items-center gap-2"><Icons.AlertTriangle size={14}/> Outros</div>
                                        <p className="text-sm text-gray-600">
                                            • Exceções devem ser aprovadas previamente pelo Secretário(a).<br/>
                                            • <strong>Revogar atos administrativos anteriores que possam estar em conflito com este a ser publicado.</strong><br/>
                                            • <strong>Vigência:</strong> A partir do 1º dia útil do próximo mês.
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        )}

                        {activeScenarioTab === 2 && (
                            <div className="animate-fade-in space-y-4">
                                <h4 className="font-bold text-gray-800 text-lg border-b pb-2">Motivação e Justificativa</h4>
                                <p className="text-gray-700 text-sm leading-relaxed text-justify">
                                    A equipe gestora do município levou em consideração, quando da definição dos pontos acima, a <strong>necessidade de padronização</strong>, já que cada unidade tinha um horário diferente e isso confundia os usuários e dificultava a organização de atividades da própria gestão que envolvessem mais de uma unidade, como cursos e reuniões técnicas.
                                </p>
                                <p className="text-gray-700 text-sm leading-relaxed text-justify">
                                    Além disso, para definição do horário estendido e o não fechamento no horário do almoço, foram levados em consideração os <strong>pedidos feitos pelos conselhos locais de saúde</strong>, que apontavam a necessidade de oferta de serviços em horários diferenciados.
                                </p>
                                <p className="text-gray-700 text-sm leading-relaxed text-justify">
                                    Por fim, os gestores também estudaram as <strong>Políticas Nacionais</strong> para verificar a adequação das regras que estavam estabelecendo com as normas em vigor; em especial, estudaram a <strong>Política Nacional de Atenção Básica</strong>.
                                </p>
                            </div>
                        )}

                        {activeScenarioTab === 3 && (
                            <div className="animate-fade-in space-y-4">
                                <h4 className="font-bold text-gray-800 text-lg border-b pb-2">Dados Adicionais</h4>
                                <div className="bg-gray-100 p-4 rounded-lg text-center">
                                    <p className="text-gray-600 text-sm mb-2">Informação crucial para a numeração:</p>
                                    <p className="text-xl font-bold text-gray-800">
                                        O último ato administrativo deste tipo publicado pela Secretaria Municipal de Saúde foi o de número <span className="text-orange-600 text-2xl">122</span>.
                                    </p>
                                </div>
                                <div className="p-4 rounded-lg border border-orange-200 bg-orange-50 text-sm text-orange-800">
                                    <strong>Dica:</strong> Lembre-se de seguir a numeração sequencial correta ao redigir o seu ato administrativo.
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const InstructionsModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                    <div className="absolute inset-0 bg-black/60 backdrop-blur-sm" onClick={onClose}></div>
                    <div className="relative bg-white rounded-xl shadow-2xl max-w-2xl w-full p-8 animate-fade-in">
                        <button onClick={onClose} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                            <Icons.X size={24} />
                        </button>
                        
                        <div className="flex items-center gap-3 mb-6 text-teal-900 border-b pb-4">
                            <div className="p-3 bg-teal-100 rounded-lg text-teal-700"><Icons.GraduationCap size={32} /></div>
                            <h2 className="text-2xl font-bold">Instruções do Curso Livre</h2>
                        </div>

                        <div className="text-slate-700 overflow-y-auto max-h-[60vh] pr-2">
                            <ol className="list-decimal list-inside space-y-3 text-base leading-relaxed">
                                <li>Este Curso Livre é voltado para profissionais da SMS de Florianópolis e será certificado com a carga horária de 2 horas/aula.</li>
                                <li>Você deve clicar no botão disponível ao lado (ou <a href="https://espfloripa.github.io/cursoslivres/" target="_blank" rel="noopener noreferrer" className="text-teal-600 hover:underline font-semibold">aqui</a>) e preencher todos os campos para se inscrever no curso no mês corrente.</li>
                                <li>Após a inscrição realizada, você tem até o último dia do mês para responder o teste de aproveitamento disponibilizado no botão no fim da página.</li>
                                <li>Ao responder o teste de aproveitamento coloque o nome completo e CPF conforme você colocou no link de inscrição.</li>
                                <li>A nota de corte para aprovação é de 80%.</li>
                                <li>O teste de aproveitamento só permite uma resposta por participante, caso você não seja aprovado poderá repetir o curso no mês seguinte.</li>
                                <li>O certificado será disponibilizado até o último dia útil do mês seguinte à finalização do curso.</li>
                            </ol>
                        </div>

                        <div className="mt-8 pt-4 border-t flex justify-end">
                            <button onClick={onClose} className="bg-teal-600 text-white px-6 py-2 rounded-full font-medium hover:bg-teal-700 transition-colors">Entendi</button>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState(0);
            const [isSidebarOpen, setIsSidebarOpen] = useState(false);
            const [showInstructions, setShowInstructions] = useState(false);

            // --- ESTADO COM PERSISTÊNCIA (localStorage) ---
            const [completed, setCompleted] = useState(() => {
                // Tenta recuperar do localStorage ao iniciar
                const saved = localStorage.getItem('esp_floripa_progress');
                if (saved) {
                    try {
                        return JSON.parse(saved);
                    } catch (e) {
                        console.error("Erro ao ler localStorage", e);
                        return [false, false, false, false, false, false];
                    }
                }
                return [false, false, false, false, false, false];
            });

            // Salva no localStorage sempre que 'completed' mudar
            useEffect(() => {
                localStorage.setItem('esp_floripa_progress', JSON.stringify(completed));
            }, [completed]);

            const toggleComplete = (index) => {
                const newCompleted = [...completed];
                newCompleted[index] = !newCompleted[index];
                setCompleted(newCompleted);
            };

            const progress = Math.round((completed.filter(Boolean).length / completed.length) * 100);

            // Renumerando as atividades para 1, 2, 3, 4, 5 e 6
            const activities = [
                { id: 0, title: "1ª Ativ: Atos Administrativos", icon: 'Briefcase', duration: "20 min" },
                { id: 1, title: "2ª Ativ: Portarias", icon: 'FileText', duration: "10 min" },
                { id: 2, title: "3ª Ativ: Normas Regulatórias", icon: 'BookOpen', duration: "10 min" },
                { id: 3, title: "4ª Ativ: Instruções Normativas", icon: 'ClipboardCheck', duration: "10 min" },
                { id: 4, title: "5ª Ativ: Regimentos Internos", icon: 'Grid', duration: "10 min" }, 
                { id: 5, title: "6ª Ativ: Teste de Aproveitamento", icon: 'PenTool', duration: "60 min" }, 
            ];

            const scrollToActivity = (index) => {
                setActiveTab(index);
                setIsSidebarOpen(false);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const renderContent = () => {
                switch(activeTab) {
                    case 0: // 1ª Ativ: Atos Administrativos
                        return (
                            <div className="animate-fade-in">
                                <SectionHeader iconName="Briefcase" title="Atos Administrativos" duration="20 minutos" isCompleted={completed[0]} onToggle={() => toggleComplete(0)} />
                                <div className="bg-white p-8 rounded-xl shadow-sm mb-6 border-l-4 border-indigo-500">
                                    <h3 className="text-xl font-bold text-indigo-900 mb-4 flex items-center gap-2">
                                        <Icons.BookOpen size={24} className="text-indigo-600" />
                                        Introdução aos Atos Administrativos na Gestão Pública
                                    </h3>
                                    <div className="prose prose-indigo max-w-none text-gray-700 leading-relaxed text-justify">
                                        <p className="mb-4">
                                            No âmbito do serviço público existem diversos tipos de atos administrativos, cada qual com finalidade, hierarquia e efeitos jurídicos próprios, utilizados para orientar, organizar, normatizar e executar as atividades institucionais.
                                        </p>
                                        <p className="mb-4">
                                            Contudo, considerando a realidade de gestão das Secretarias Municipais e Estaduais de Saúde — marcadas por alta complexidade operacional, forte demanda regulatória e necessidade permanente de organização interna — este material concentrar-se-á em quatro instrumentos considerados mais relevantes para a rotina administrativa e técnica dessas instituições: <strong>Portarias, Normas Regulatórias, Instruções Normativas e Regimentos Internos</strong>.
                                        </p>
                                        <p>
                                            Esses atos concentram a maior parte das decisões estratégicas, operacionais e organizacionais no âmbito da gestão do SUS, sendo fundamentais para estruturar serviços, disciplinar processos, regulamentar programas e garantir segurança jurídica às ações institucionais.
                                        </p>
                                    </div>
                                </div>
                                <div className="bg-white p-6 rounded-xl shadow-sm mb-6">
                                    <h3 className="text-lg font-bold text-gray-800 mb-4">Para entender os atos administrativos mais comuns</h3>
                                    <div className="aspect-w-16 aspect-h-9 bg-gray-900 rounded-lg overflow-hidden shadow-lg">
                                        <iframe 
                                            className="w-full h-96" 
                                            src="https://www.youtube.com/embed/ne-dieQSGI8" 
                                            title="YouTube video player" 
                                            frameBorder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                            allowFullScreen>
                                        </iframe>
                                    </div>
                                </div>
                            </div>
                        );

                    case 1: // 2ª Ativ: Portarias
                        const portariaGuides = [
                            { id: 1, title: "1. Cabeçalho", icon: "Layout", details: [ { sub: "Identificação", text: "Órgão emissor (ex: Ministério, Secretaria)." }, { sub: "Numeração/Data", text: "Sequencial e datada (ex: Portaria nº 123/2025)." }, { sub: "Localidade", text: "Cidade onde foi expedida." } ] },
                            { id: 2, title: "2. Ementa", icon: "FileText", details: [ { sub: "Resumo", text: "Breve e objetivo do conteúdo." }, { sub: "Exemplo", text: "\"Dispõe sobre a regulamentação...\"" } ] },
                            { id: 3, title: "3. Preâmbulo", icon: "BookOpen", details: [ { sub: "Fundamentação", text: "Base legal (Leis, decretos) que confere atribuição." }, { sub: "Motivação", text: "Justificativas iniciadas por \"Considerando...\"." } ] },
                            { id: 4, title: "4. Corpo do Texto", icon: "FileText", details: [ { sub: "Artigos", text: "Segmentam temas principais (Art. 1º)." }, { sub: "Parágrafos", text: "Detalham o artigo (§ 1º)." }, { sub: "Incisos/Alíneas", text: "Listas específicas (I, II...)." } ] },
                            { id: 5, title: "5. Cláusulas Finais", icon: "Clock", details: [ { sub: "Vigência", text: "Data que entra em vigor (ex: na publicação)." }, { sub: "Revogação", text: "Anula normas anteriores (\"Revogam-se...\")." } ] },
                            { id: 6, title: "6. Assinatura", icon: "PenTool", details: [ { sub: "Autoridade", text: "Nome, cargo e assinatura do emissor." } ] },
                            { id: 7, title: "7. Publicação", icon: "Share2", details: [ { sub: "Obrigatoriedade", text: "Deve ser publicada em Diário Oficial." }, { sub: "Efeito", text: "Garante a validade legal do ato." } ] }
                        ];
                        return (
                            <div className="animate-fade-in">
                                <SectionHeader iconName="FileText" title="Portarias" duration="10 minutos" isCompleted={completed[1]} onToggle={() => toggleComplete(1)} />
                                <div className="bg-white p-6 rounded-xl shadow-sm mb-6 border-l-4 border-blue-500">
                                    <div className="flex items-start gap-4">
                                        <Icons.Info className="text-blue-500 shrink-0 mt-1" />
                                        <div>
                                            <p className="text-gray-700">A Portaria deve ser utilizada quando a autoridade administrativa precisar formalizar decisões pontuais ou atos de gestão específicos, como designação de servidores, criação de comissões, autorização de atividades, nomeações, homologações e determinações administrativas internas ou direcionadas a públicos específicos. É o instrumento adequado para atos de natureza executiva, normalmente com efeitos imediatos e duração variável, sendo amplamente empregada para operacionalizar decisões hierárquicas no âmbito da gestão pública ou institucional.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                {/* Componente visual que estava faltando */}
                                <h3 className="text-xl font-bold text-gray-800 mb-2 px-2">Visão Geral da Estrutura</h3>
                                <PortariaStructure />

                                <h3 className="text-xl font-bold text-gray-800 mb-4 px-2 mt-8">Detalhamento da Estrutura (Interativo)</h3>
                                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {portariaGuides.map((guide) => (
                                        <div key={guide.id} className="flip-card group bg-transparent w-full h-72 perspective-1000 cursor-pointer">
                                            <div className="flip-card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d shadow-md rounded-xl">
                                                <div className="absolute w-full h-full backface-hidden bg-white border-2 border-blue-100 rounded-xl flex flex-col items-center justify-center p-6 text-blue-800">
                                                    <div className="bg-blue-100 p-4 rounded-full mb-4">{Icons[guide.icon] ? React.createElement(Icons[guide.icon], { size: 32 }) : null}</div>
                                                    <h3 className="text-xl font-bold">{guide.title}</h3>
                                                    <p className="text-xs text-blue-600 mt-4 uppercase tracking-widest font-semibold">Ver Detalhes</p>
                                                </div>
                                                <div className="absolute w-full h-full backface-hidden rotate-y-180 bg-blue-700 text-white rounded-xl p-6 flex flex-col justify-center text-left overflow-y-auto">
                                                    <h4 className="font-bold border-b border-blue-500 pb-2 mb-3 text-lg">{guide.title}</h4>
                                                    <ul className="space-y-3 text-sm">{guide.details.map((detail, idx) => (<li key={idx}><span className="font-bold text-blue-200 block text-xs">{detail.sub}</span><span className="leading-tight">{detail.text}</span></li>))}</ul>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 2: // 3ª Ativ: Normas Regulatórias
                        const normaGuides = [
                            { id: 1, title: "1. Título do Ato", icon: "Layout", details: [{ sub: "Identificação", text: "Clara do tipo de norma e conteúdo regulado." }, { sub: "Exemplo", text: "Resolução nº 12/2025 — Regulamento sobre..." }] },
                            { id: 2, title: "2. Ementa", icon: "FileText", details: [{ sub: "Resumo", text: "Sintético do objeto regulado." }, { sub: "Exemplo", text: "\"Estabelece critérios técnicos para...\"" }] },
                            { id: 3, title: "3. Preâmbulo", icon: "BookOpen", details: [{ sub: "Base Legal", text: "Justificativa jurídica da competência." }, { sub: "Autoridade", text: "\"A Diretoria Colegiada... no uso das atribuições...\"" }] },
                            { id: 4, title: "4. Considerandos", icon: "List", details: [{ sub: "Justificativas", text: "Fundamentos técnicos, jurídicos e institucionais." }, { sub: "Lógica", text: "\"Considerando a Lei... Considerando a necessidade...\"" }] },
                            { id: 5, title: "5. Disposições Preliminares", icon: "Info", details: [{ sub: "Definição", text: "Objeto, campo de aplicação e conceitos." }, { sub: "Artigos", text: "Art. 1º Objeto, Art. 2º Abrangência, Art. 3º Definições." }] },
                            { id: 6, title: "6. Capítulos Temáticos", icon: "Settings", details: [{ sub: "Conteúdo", text: "Requisitos, condições, procedimentos, fiscalização." }, { sub: "Exemplo", text: "Cap. II Dos Requisitos; Cap. III Do Monitoramento." }] },
                            { id: 7, title: "7. Disposições Transitórias", icon: "Clock", details: [{ sub: "Aplicação", text: "Quando há necessidade de adaptação gradual." }, { sub: "Uso", text: "Regras de transição." }] },
                            { id: 8, title: "8. Disposições Finais", icon: "CheckCircle", details: [{ sub: "Vigência", text: "Data de início dos efeitos." }, { sub: "Revogação", text: "Expressa de normas anteriores." }] },
                            { id: 9, title: "9. Assinatura e Publicação", icon: "PenTool", details: [{ sub: "Formalização", text: "Assinatura da autoridade reguladora." }, { sub: "Publicidade", text: "Publicação em meio oficial." }] }
                        ];
                        
                        return (
                            <div className="animate-fade-in">
                                <SectionHeader iconName="BookOpen" title="Normas Regulatórias (Resoluções, Regulamentos, Normas Técnicas)" duration="10 minutos" isCompleted={completed[2]} onToggle={() => toggleComplete(2)} />
                                <div className="bg-white p-6 rounded-xl shadow-sm mb-6 border-l-4 border-purple-500">
                                    <div className="flex items-start gap-4">
                                        <Icons.Info className="text-purple-500 shrink-0 mt-1" />
                                        <div>
                                            <p className="text-gray-700">A Norma Regulatória (Resoluções, Regulamentos, Normas Técnicas) deve ser utilizada quando há necessidade de estabelecer regras técnicas, parâmetros de funcionamento, critérios de conformidade ou obrigações gerais com caráter duradouro e sistemático. É indicada para disciplinar atividades contínuas, padronizar processos críticos, definir exigências legais e técnicas e regulamentar setores, serviços ou procedimentos de forma ampla, podendo atingir tanto o público interno quanto externo à organização. Seu uso é recomendado sempre que a matéria exigir estabilidade normativa e autoridade regulatória.</p>
                                        </div>
                                    </div>
                                </div>
                                <h3 className="text-xl font-bold text-gray-800 mb-4 px-2">Estrutura Padrão – Normas Regulatórias</h3>
                                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {normaGuides.map((guide) => (
                                        <div key={guide.id} className="flip-card group bg-transparent w-full h-72 perspective-1000 cursor-pointer">
                                            <div className="flip-card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d shadow-md rounded-xl">
                                                <div className="absolute w-full h-full backface-hidden bg-white border-2 border-purple-100 rounded-xl flex flex-col items-center justify-center p-6 text-purple-800">
                                                    <div className="bg-purple-100 p-4 rounded-full mb-4">{Icons[guide.icon] ? React.createElement(Icons[guide.icon], { size: 32 }) : null}</div>
                                                    <h3 className="text-xl font-bold">{guide.title}</h3>
                                                    <p className="text-xs text-purple-600 mt-4 uppercase tracking-widest font-semibold">Ver Detalhes</p>
                                                </div>
                                                <div className="absolute w-full h-full backface-hidden rotate-y-180 bg-purple-700 text-white rounded-xl p-6 flex flex-col justify-center text-left overflow-y-auto">
                                                    <h4 className="font-bold border-b border-purple-500 pb-2 mb-3 text-lg">{guide.title}</h4>
                                                    <ul className="space-y-3 text-sm">{guide.details.map((detail, idx) => (<li key={idx}><span className="font-bold text-purple-200 block text-xs">{detail.sub}</span><span className="leading-tight">{detail.text}</span></li>))}</ul>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 3: // 4ª Ativ: Instruções Normativas
                        const instructionGuides = [
                            { id: 1, title: "1. Identificação", icon: "Layout", details: [{ sub: "Componentes", text: "Tipo, número, data e órgão emissor." }, { sub: "Exemplo", text: "Instrução Normativa nº 03/2025." }] },
                            { id: 2, title: "2. Ementa", icon: "FileText", details: [{ sub: "Objeto", text: "Objeto operacional da norma." }, { sub: "Exemplo", text: "\"Dispõe sobre os procedimentos para...\"" }] },
                            { id: 3, title: "3. Autoridade e Fundamento", icon: "BookOpen", details: [{ sub: "Base", text: "Indicação da base administrativa da autoridade emitente." }] },
                            { id: 4, title: "4. Finalidade (Objetivo)", icon: "CheckCircle", details: [{ sub: "Diferencial", text: "Explicitar a finalidade prática." }, { sub: "Exemplo", text: "\"Esta Instrução Normativa tem por objetivo...\"" }] },
                            { id: 5, title: "5. Campo de Aplicação", icon: "Users", details: [{ sub: "Alcance", text: "Define quem deve cumprir." }, { sub: "Exemplo", text: "\"Aplica-se às unidades administrativas...\"" }] },
                            { id: 6, title: "6. Definições", icon: "Info", details: [{ sub: "Conceitos", text: "Padroniza conceitos técnicos (se aplicável)." }] },
                            { id: 7, title: "7. Procedimentos Operacionais", icon: "List", details: [{ sub: "Núcleo", text: "Etapas, responsáveis, prazos, formatos, critérios." }, { sub: "Seções", text: "I - Fluxo, II - Responsabilidades, III - Prazos." }] },
                            { id: 8, title: "8. Monitoramento", icon: "BarChart", details: [{ sub: "Controle", text: "Mecanismo de controle interno." }, { sub: "Ações", text: "Auditorias, relatórios, supervisão." }] },
                            { id: 9, title: "9. Penalidades", icon: "AlertTriangle", details: [{ sub: "Sanções", text: "Penalidades e providências administrativas (se houver)." }] },
                            { id: 10, title: "10. Vigência e Revogações", icon: "Clock", details: [{ sub: "Validade", text: "Início da vigência e normas revogadas." }] },
                            { id: 11, title: "11. Assinatura", icon: "PenTool", details: [{ sub: "Autoridade", text: "Assinatura da Autoridade Administrativa." }] },
                            { id: 12, title: "12. Publicização", icon: "Share2", details: [{ sub: "Divulgação", text: "Forma de publicização interna." }] }
                        ];

                        return (
                            <div className="animate-fade-in">
                                <SectionHeader iconName="ClipboardCheck" title="Instruções Normativas" duration="10 minutos" isCompleted={completed[3]} onToggle={() => toggleComplete(3)} />
                                <div className="bg-white p-6 rounded-xl shadow-sm mb-6 border-l-4 border-orange-500">
                                    <div className="flex items-start gap-4">
                                        <Icons.Info className="text-orange-500 shrink-0 mt-1" />
                                        <div>
                                            <p className="text-gray-700">A Instrução Normativa deve ser utilizada quando o objetivo for detalhar a aplicação prática de normas superiores ou definir rotinas operacionais internas. É o instrumento adequado para orientar o “como fazer” da administração, especificando fluxos de trabalho, responsabilidades, prazos, formas de execução e controles internos. Deve ser empregada sempre que houver necessidade de padronizar procedimentos administrativos e garantir uniformidade na execução dos processos institucionais.</p>
                                        </div>
                                    </div>
                                </div>
                                <h3 className="text-xl font-bold text-gray-800 mb-4 px-2">Estrutura Padrão – Instruções Normativas</h3>
                                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {instructionGuides.map((guide) => (
                                        <div key={guide.id} className="flip-card group bg-transparent w-full h-72 perspective-1000 cursor-pointer">
                                            <div className="flip-card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d shadow-md rounded-xl">
                                                <div className="absolute w-full h-full backface-hidden bg-white border-2 border-orange-100 rounded-xl flex flex-col items-center justify-center p-6 text-orange-800">
                                                    <div className="bg-orange-100 p-4 rounded-full mb-4">{Icons[guide.icon] ? React.createElement(Icons[guide.icon], { size: 32 }) : null}</div>
                                                    <h3 className="text-xl font-bold">{guide.title}</h3>
                                                    <p className="text-xs text-orange-600 mt-4 uppercase tracking-widest font-semibold">Ver Detalhes</p>
                                                </div>
                                                <div className="absolute w-full h-full backface-hidden rotate-y-180 bg-orange-600 text-white rounded-xl p-6 flex flex-col justify-center text-left overflow-y-auto">
                                                    <h4 className="font-bold border-b border-orange-400 pb-2 mb-3 text-lg">{guide.title}</h4>
                                                    <ul className="space-y-3 text-sm">{guide.details.map((detail, idx) => (<li key={idx}><span className="font-bold text-orange-200 block text-xs">{detail.sub}</span><span className="leading-tight">{detail.text}</span></li>))}</ul>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 4: // 5ª Ativ: Regimentos Internos (NOVA)
                        const regimentoGuides = [
                            { id: 1, title: "1. Título e Preâmbulo", icon: "Layout", details: [{ sub: "Identificação", text: "\"Regimento Interno do(a)...\"" }, { sub: "Contexto", text: "Finalidade e papel do órgão." }] },
                            { id: 2, title: "2. Finalidade e Natureza", icon: "BookOpen", details: [{ sub: "Capítulo I", text: "Definição da missão e natureza jurídica da instituição." }] },
                            { id: 3, title: "3. Estrutura Organizacional", icon: "Grid", details: [{ sub: "Capítulo II", text: "Organogramas, unidades e colegiados que compõem o órgão." }] },
                            { id: 4, title: "4. Competências", icon: "CheckCircle", details: [{ sub: "Capítulo III", text: "Atribuições da Presidência, Conselhos, Comitês e Unidades." }] },
                            { id: 5, title: "5. Funcionamento", icon: "Settings", details: [{ sub: "Capítulo IV", text: "Reuniões, deliberações, quóruns, atas e rotinas." }] },
                            { id: 6, title: "6. Direitos e Deveres", icon: "Users", details: [{ sub: "Capítulo V", text: "Regras aplicáveis aos membros ou pessoal interno." }] },
                            { id: 7, title: "7. Processo Decisório", icon: "BarChart", details: [{ sub: "Capítulo VI", text: "Fluxos de decisão, instâncias recursais e prazos." }] },
                            { id: 8, title: "8. Alterações Regimentais", icon: "PenTool", details: [{ sub: "Capítulo VII", text: "Procedimentos para modificar o regimento." }] },
                            { id: 9, title: "9. Disposições Finais", icon: "Clock", details: [{ sub: "Encerramento", text: "Disposições transitórias, assinatura e publicidade oficial." }] }
                        ];

                        return (
                            <div className="animate-fade-in">
                                <SectionHeader iconName="Grid" title="Regimentos Internos" duration="10 minutos" isCompleted={completed[4]} onToggle={() => toggleComplete(4)} />
                                <div className="bg-white p-6 rounded-xl shadow-sm mb-6 border-l-4 border-cyan-500">
                                    <div className="flex items-start gap-4">
                                        <Icons.Info className="text-cyan-500 shrink-0 mt-1" />
                                        <div>
                                            <p className="text-gray-700">O Regimento Interno deve ser utilizado quando a instituição precisa organizar formalmente sua estrutura administrativa, definir competências de órgãos e unidades, regulamentar instâncias decisórias, estabelecer regras de funcionamento e disciplinar relações institucionais internas. Trata-se do instrumento normativo que estrutura a governança da organização, garantindo clareza quanto às atribuições, hierarquia, funcionamento dos colegiados e forma de tomada de decisões, sendo fundamental como base organizacional das demais normas e atos administrativos.</p>
                                        </div>
                                    </div>
                                </div>
                                <h3 className="text-xl font-bold text-gray-800 mb-4 px-2">Estrutura Padrão – Regimentos Internos</h3>
                                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {regimentoGuides.map((guide) => (
                                        <div key={guide.id} className="flip-card group bg-transparent w-full h-72 perspective-1000 cursor-pointer">
                                            <div className="flip-card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d shadow-md rounded-xl">
                                                <div className="absolute w-full h-full backface-hidden bg-white border-2 border-cyan-100 rounded-xl flex flex-col items-center justify-center p-6 text-cyan-800">
                                                    <div className="bg-cyan-100 p-4 rounded-full mb-4">{Icons[guide.icon] ? React.createElement(Icons[guide.icon], { size: 32 }) : null}</div>
                                                    <h3 className="text-xl font-bold">{guide.title}</h3>
                                                    <p className="text-xs text-cyan-600 mt-4 uppercase tracking-widest font-semibold">Ver Detalhes</p>
                                                </div>
                                                <div className="absolute w-full h-full backface-hidden rotate-y-180 bg-cyan-600 text-white rounded-xl p-6 flex flex-col justify-center text-left overflow-y-auto">
                                                    <h4 className="font-bold border-b border-cyan-400 pb-2 mb-3 text-lg">{guide.title}</h4>
                                                    <ul className="space-y-3 text-sm">{guide.details.map((detail, idx) => (<li key={idx}><span className="font-bold text-cyan-200 block text-xs">{detail.sub}</span><span className="leading-tight">{detail.text}</span></li>))}</ul>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 5: // 6ª Ativ: Exercício Prático
                        return (
                            <div className="animate-fade-in">
                                <SectionHeader iconName="PenTool" title="Teste de Aproveitamento" duration="60 minutos" isCompleted={completed[5]} onToggle={() => toggleComplete(5)} />
                                <div className="mb-6 bg-white p-4 rounded-xl shadow-sm border border-gray-200 flex justify-center">
                                    <img src="https://i.imgur.com/m5hYsUP.png" alt="Organograma ou Ilustração do Cenário" className="max-h-64 h-auto rounded-lg" />
                                </div>
                                <div className="flex justify-center h-full">
                                    <div className="w-full max-w-2xl flex flex-col justify-center">
                                        <div className="bg-teal-700 text-white p-8 rounded-xl shadow-lg text-center">
                                            <Icons.PenTool size={48} className="mx-auto mb-4 opacity-80" />
                                            <h3 className="text-2xl font-bold mb-2">Teste de Aproveitamento</h3>
                                            <p className="opacity-90 mb-8">Após ter se inscrito e terminar o curso clique no botão abaixo para fazer o teste de aproveitamento!</p>
                                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSfeLeoIJi7NoS8Ys_e84MQNopiJ9yyDrl0la2qi_IoXrEYmFg/viewform?usp=header" target="_blank" className="inline-flex items-center justify-center gap-2 bg-white text-teal-800 font-bold py-3 px-6 rounded-full hover:bg-teal-50 hover:scale-105 transition-all w-full shadow-md">Teste de aproveitamento <Icons.ExternalLink size={18} /></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        );
                    default: return null;
                }
            };

            return (
                <div className="min-h-screen flex flex-col md:flex-row">
                    <InstructionsModal isOpen={showInstructions} onClose={() => setShowInstructions(false)} />
                    <div className="md:hidden bg-teal-800 text-white p-4 flex justify-between items-center sticky top-0 z-50 shadow-md">
                        <span className="font-bold text-lg">ESP Floripa</span>
                        <button onClick={() => setIsSidebarOpen(!isSidebarOpen)}>{isSidebarOpen ? <Icons.X /> : <Icons.Menu />}</button>
                    </div>
                    <aside className={`fixed md:sticky top-0 h-screen w-72 bg-white border-r border-gray-200 z-40 transform transition-transform duration-300 ease-in-out flex flex-col ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0`}>
                        <div className="p-6 gradient-header text-white shrink-0">
                            <h1 className="font-bold text-xl leading-tight">Escola de Saúde Pública de Florianópolis</h1>
                            <p className="text-teal-100 text-sm mt-1">Curso Livre</p>
                            
                            <div className="mt-6">
                                <div className="flex justify-between text-xs text-teal-100 mb-1"><span>Progresso da Aula</span><span>{progress}%</span></div>
                                <div className="w-full bg-teal-900/30 rounded-full h-2"><div className="bg-white h-2 rounded-full transition-all duration-500" style={{ width: `${progress}%` }}></div></div>
                            </div>
                        </div>
                        <nav className="flex-1 overflow-y-auto py-4 px-2 space-y-1">
                            {activities.map((act) => (
                                <button key={act.id} onClick={() => scrollToActivity(act.id)} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${activeTab === act.id ? 'bg-teal-50 text-teal-800 border-r-4 border-teal-600 font-medium' : 'text-gray-600 hover:bg-gray-50'}`}>
                                    <div className="relative">
                                        {Icons[act.icon] ? React.createElement(Icons[act.icon], { size: 18 }) : null}
                                        {completed[act.id] && <div className="absolute -top-1 -right-1 bg-green-500 rounded-full p-[2px] border border-white"><div className="w-1.5 h-1.5 bg-white rounded-full"></div></div>}
                                    </div>
                                    <span className="text-sm truncate">{act.title}</span>
                                </button>
                            ))}
                        </nav>
                        <div className="p-4 border-t text-xs text-gray-400 text-center">© 2025 ESP-Floripa<br/>Todos os direitos reservados.</div>
                    </aside>
                    <main className="flex-1 p-6 md:p-10 max-w-5xl mx-auto w-full">
                        <div className="mb-8 main-banner p-8 rounded-2xl shadow-md border border-gray-200">
                            <span className="text-teal-700 font-bold tracking-wide text-sm uppercase bg-white/80 px-2 py-1 rounded backdrop-blur-sm">Curso Livre</span>
                            <h2 className="text-3xl font-extrabold text-teal-900 mt-3 drop-shadow-sm">Atos Institucionais</h2>
                            <p className="text-teal-900 font-medium mt-2 max-w-2xl bg-white/60 p-1 rounded backdrop-blur-sm inline-block">Atividades, leituras e exercícios para gestão eficiente.</p>
                            
                            <div className="mt-6 flex flex-wrap gap-4">
                                <button onClick={() => setShowInstructions(true)} className="flex items-center gap-2 text-white bg-teal-600 hover:bg-teal-700 py-2 px-6 rounded-full transition-colors shadow-md font-medium text-sm md:text-base">
                                    <Icons.GraduationCap size={20} />
                                    Curso Livre - Instruções
                                </button>
                                <a href="https://espfloripa.github.io/cursoslivres/" target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 text-white bg-teal-600 hover:bg-teal-700 py-2 px-6 rounded-full transition-colors shadow-md font-medium text-sm md:text-base">
                                    <Icons.PenTool size={20} />
                                    Curso Livre - Inscrição
                                </a>
                            </div>
                        </div>
                        {renderContent()}
                    </main>
                    {isSidebarOpen && <div className="fixed inset-0 bg-black/50 z-30 md:hidden" onClick={() => setIsSidebarOpen(false)}></div>}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>